import{l as $,_ as V,o as l,a as i,e as p,d as M,F as x,g as U,i as C,m as q,n as z,p as A,k as F,f as B,t as S,q as R,r as m,c as h,s as H,w as G,b as f,v as Y,u as k,x as j,h as J}from"./index-DsLLHNOG.js";import{M as T,A as K,u as Q}from"./AppHeader-Bzt0aRGn.js";import{get as y}from"lodash-es";import{getPCLocationInfo as I}from"@varlet/cli/client";import"@varlet/touch-emulator";const P={locks:{},zIndex:2e3,enableRipple:!0};$(P);var W=$(P);const X={name:"AppMobile",props:{componentName:{type:String},language:{type:String},replace:{type:String},hash:{type:String}}},Z={class:"varlet-site-mobile varlet-site-mobile--375"},ee={class:"varlet-site-mobile-content"},ae=["src"];function te(N,c,n,v,u,d){return l(),i("div",Z,[p("div",ee,[p("iframe",{id:"mobile",src:`./mobile.html#/${n.componentName}?language=${n.language}&platform=pc&replace=${n.replace}${n.hash?`#${n.hash}`:""}`},null,8,ae)])])}const ne=V(X,[["render",te]]),oe={class:"varlet-site-sidebar var-elevation--3"},se=["href"],le={key:0,class:"varlet-site-sidebar__item--title"},re={key:1},ie=M({__name:"AppSidebar",props:{menu:{},menuName:{},language:{}},emits:["change"],setup(N,{emit:c}){const n=N,v=c,u=$(T),d=a=>{a.type===T.TITLE||n.menuName===a.doc||v("change",a)};return(a,s)=>{const g=C("var-cell"),b=q("ripple");return l(),i("div",oe,[(l(!0),i(x,null,U(a.menu,(o,w)=>(l(),i("a",{class:"varlet-site-sidebar__link",key:w,href:`#/${a.language}/${o.doc}`,onClick:s[0]||(s[0]=z(()=>{},["prevent"]))},[A((l(),F(g,{class:R(["varlet-site-sidebar__item",{"varlet-site-sidebar__item--active":o.doc===a.menuName,"varlet-site-sidebar__cell":o.type!==u.TITLE,"varlet-site-sidebar__title":o.type===u.TITLE}]),id:o.doc,onClick:E=>d(o)},{default:B(()=>[s[1]||(s[1]=p("span",{class:"varlet-site-sidebar__indicator"},null,-1)),o.type===u.TITLE?(l(),i("span",le,S(o.text[a.language]),1)):(l(),i("span",re,S(o.text[a.language]),1))]),_:2},1032,["id","class","onClick"])),[[b,{disabled:o.type===u.TITLE}]])],8,se))),128))])}}}),ce={class:"varlet-site"},ue={class:"varlet-site-content"},de={class:"varlet-site-playground-container"},me=["src"],fe=M({__name:"Layout",setup(N){const c=W,n=m(y(h,"pc.menu",[])),v=m(y(h,"useMobile")),u=y(h,"mobile.redirect"),d=m(""),a=m(),s=m(""),g=m(""),b=m(null),o=Q(),w=e=>{const t=n.value.find(r=>r.doc===e);return(t==null?void 0:t.type)===T.COMPONENT?e:u.slice(1)},E=()=>{const{menuName:e}=I();j(()=>{const t=document.querySelector(".varlet-site-sidebar").getElementsByClassName("var-cell"),r=n.value.findIndex(_=>_.doc===e);r!==-1&&t[r].scrollIntoView({block:"center",inline:"start"})})},D=e=>{b.value.scrollTop=0,a.value=w(e.doc),s.value=e.doc,g.value=""},L=()=>{const e="VARLET_UI_PLAYGROUND_HAS_BEEN_CLOSED";!localStorage.getItem(e)&&!window.confirm("The code will no longer be saved after closing. Are you sure you want to close?")||(localStorage.setItem(e,"true"),c.showPlayground=!1)};return H(()=>{E(),window.addEventListener("message",e=>{const{data:t}=e;t.action==="playground-close"&&L()})}),G(()=>o.path,()=>{var _;const{language:e,menuName:t,hash:r}=I();!e||!t||(a.value=w(t),s.value=t,g.value=r,d.value=e,v.value=((_=n.value.find(O=>O.doc===t))==null?void 0:_.useMobile)??y(h,"useMobile"),document.title=y(h,"pc.title")[e])},{immediate:!0}),(e,t)=>{const r=C("router-view"),_=C("var-popup");return l(),i(x,null,[p("div",ce,[f(K,{language:d.value},null,8,["language"]),p("div",ue,[f(ie,{language:d.value,menu:n.value,"menu-name":s.value,onChange:D},null,8,["language","menu","menu-name"]),p("div",{class:R(["varlet-site-doc-container",[!v.value&&"varlet-site-doc-container--pc-only"]]),ref_key:"doc",ref:b},[f(r)],2),A(f(ne,{"component-name":a.value,language:d.value,replace:s.value,hash:g.value},null,8,["component-name","language","replace","hash"]),[[Y,v.value]])])]),f(_,{position:"right",show:k(c).showPlayground,onClickOverlay:L},{default:B(()=>[p("div",de,[k(c).showPlayground?(l(),i("iframe",{key:0,id:"playground",class:"varlet-site-playground-iframe",src:k(c).playgroundURL,allow:"clipboard-write"},null,8,me)):J("v-if",!0)])]),_:1},8,["show"])],64)}}});export{fe as default};
